<!DOCTYPE html>
<html lang="en">
  <head>
    <title>J-Chess</title>
    <link rel="icon" href="img/favicon.png" />
    <link rel="stylesheet" href="css/chessboard-1.0.0.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="js/chessboard-1.0.0.min.js"></script>
    <script src="js/chess.js"></script>
    <script src="https://kit.fontawesome.com/f9c23346f5.js" crossorigin="anonymous"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js" integrity="sha384-mZLF4UVrpi/QTWPA7BjNPEnkIfRFn4ZEO3Qt/HFklTJBj/gBOV8G3HcKn4NfQblz" crossorigin="anonymous"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7650598065684623"
     crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7650598065684623"
     crossorigin="anonymous"></script>
</head>
  <body>
    <div id="mainbar" class="sidebar-content d-flex flex-column">
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#settingsModal"><i class="fa-solid fa-gear"></i></button>
      <br />
      <button id="logoutButton" class="btn btn-danger mt-auto"><i class="fa-solid fa-right-from-bracket"></i></button>
    </div>

    <div class="content">
      <div class="main-container d-flex align-items-center">
        <div class="playerInfo">
          <div class="row">
            <div class="col-4 d-flex justify-content-center align-items-center" style="height: 82px">
              <h4 class="player-info-item">
                <picture id="pfpPlayerInfo"></picture>
                <span id="playerUsername"></span>
              </h4>
            </div>
            <div class="col-4 d-flex justify-content-center align-items-center" style="height: 82px">
              <h4 class="player-info-item">
                <span class="icon-label">Trophies</span>
                <i class="fas fa-trophy player-icon" aria-hidden="true"></i> 
                <span id="playerTrophies"></span>
              </h4>
            </div>
            <div class="col-4 d-flex justify-content-center align-items-center">
              <h4 class="player-info-item">
                <span class="icon-label">Rank</span>
                <i class="fas fa-chess-king player-icon" aria-hidden="true"></i> 
                <span id="playerRanking"></span>
              </h4>
            </div>
          </div>
        </div>
        

        <div id="mainRow" class="row gx-5">
          <div class="col">
            <div id="topUsersDiv">
              <h2>Top Players</h2>
              <div id="topUsers">
                <i class="fas fa-circle-notch fa-spin fa-1x"></i>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="title-container d-flex flex-column justify-content-center align-items-center">
              <img src="img/logo.png" alt="Logo" id="logo" />
              <h1 id="pageTitle">J-Chess</h1>
            </div>
            <div id="borderDivMain">
              <h1 id="mainHeader">J-Chess</h1>
              <div class="game-selection d-flex flex-column align-items-stretch">
                <div class="btn-group">
                  <button type="button" id="playButton" class="btn btn-lg btn-primary">Battle</button>
                  <button type="button" id="btnDropdown" class="btn btn-lg btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="sr-only">Toggle Dropdown</span>
                  </button>
                  <div class="dropdown-menu">
                    <span class="dropdown-header">Select Game Mode</span>
                    <a class="dropdown-item" id="online" href="#"><i class="fas fa-globe"></i> Classic</a>
                    <a class="dropdown-item" ref="#"><i class="fas fa-robot"></i> Bot</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-bolt"></i> Blitz</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-chess-pawn"></i> Pawn Endgame</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-chess-queen"></i> Q vs N</a>
                    <a class="dropdown-item" href="#"><i class="fas fa-bullseye"></i> Bullet</a>
                  </div>
                </div>
              </div>
              <div id="gameModeInfo"></div>
            </div>
            <div class="text-center">
              <ul id="footerList" class="list-inline">
                <li class="list-inline-item">&copy; 2024 Julian Gabriel</li>
                <li class="list-inline-item"><a data-bs-toggle="modal" data-bs-target="#contactModal" href="#"><i class="fa-solid fa-envelope"></i> Contact</a></li>
                <li class="list-inline-item"><a data-bs-toggle="modal" data-bs-target="#imprintModal" href="#"><i class="fa-solid fa-file-alt"></i> Imprint</a></li>
              </ul>
            </div>
          </div>
          <div class="col">
            <div id="globChat">
              <h2>Global Chat</h2>
              <div id="globChatWindow" class="border p-3 mb-3 bg-light rounded">
                <i id="spinnerGlobChat" class="fa-solid fa-spin fa-circle-notch"></i>
              </div>
              <div class="d-flex">
                <input type="text" id="globMessage" class="form-control mb-2 mr-2" placeholder="Nachricht"></input>
                <button id="sendButton" class="btn btn-primary">
                  <i id="sendGlob" class="fas fa-paper-plane"></i>
                  <i id="spinnerGlob" class="fa-solid fa-spin fa-circle-notch" style="font-size: 1em; display: none"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div id="scrollDiv">

        <div id="mainRowM" class="row gx-5">
            <div class="col">
              <div class="title-container d-flex flex-column justify-content-center align-items-center">
                <img src="img/logo.png" alt="Logo" id="logo" />
                <h1 id="pageTitle">J-Chess</h1>
              </div>
              <div id="borderDivMain">
                <h1 id="mainHeader">J-Chess</h1>
                <div class="game-selection d-flex flex-column align-items-stretch">
                  <div class="btn-group">
                    <button type="button" id="playButton" class="btn btn-lg btn-primary">Battle</button>
                    <button type="button" id="btnDropdown" class="btn btn-lg btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <div class="dropdown-menu">
                      <span class="dropdown-header">Select Game Mode</span>
                      <a class="dropdown-item" id="online" href="#"><i class="fas fa-globe"></i> Classic</a>
                      <a class="dropdown-item" ref="#"><i class="fas fa-robot"></i> Bot</a>
                      <a class="dropdown-item" href="#"><i class="fas fa-bolt"></i> Blitz</a>
                      <a class="dropdown-item" href="#"><i class="fas fa-chess-pawn"></i> Pawn Endgame</a>
                      <a class="dropdown-item" href="#"><i class="fas fa-chess-queen"></i> Q vs N</a>
                      <a class="dropdown-item" href="#"><i class="fas fa-bullseye"></i> Bullet</a>
                    </div>
                  </div>
                </div>
                <div id="gameModeInfo"></div>
                    <div class="d-flex flex-column justify-content-between">
                        <div id="topUsers" class="col p-3">
                        <i class="fas fa-circle-notch fa-spin fa-1x"></i>
                        </div>
                        <div id="globChatWindow" class="col border p-3 mb-3 bg-light rounded">
                        <i id="spinnerGlobChat" class="fa-solid fa-spin fa-circle-notch"></i>
                        </div>
                        <div class="d-flex">
                            <input type="text" id="globMessage" class="form-control mb-2 mr-2" placeholder="Nachricht"></input>
                            <button id="sendButton" class="btn btn-primary">
                              <i id="sendGlob" class="fas fa-paper-plane"></i>
                              <i id="spinnerGlob" class="fa-solid fa-spin fa-circle-notch" style="font-size: 1em; display: none"></i>
                            </button>
                          </div>
                    </div>
              </div>
              <div class="text-center">
                <ul id="footerList" class="list-inline">
                  <li class="list-inline-item">&copy; 2024 Julian Gabriel</li>
                  <li class="list-inline-item"><a  data-bs-toggle="modal" data-bs-target="#contactModal" href="#"><i class="fa-solid fa-envelope"></i> Contact</a></li>
                  <li class="list-inline-item"><a data-bs-toggle="modal" data-bs-target="#imprintModal" href="#"><i class="fa-solid fa-file-alt"></i> Imprint</a></li>
                </ul>
              </div>
            </div>

            <div id="mobileBar" class="fixed-bottom d-flex flex-row align-items-center justify-content-center p-3">
                <h4 class="player-info-item">
                    <picture id="pfpPlayerInfo"></picture>
                </h4>
                <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#infoModal">
                  <i class="fa-solid fa-info-circle"></i> 
                </button>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#settingsModal"><i class="fa-solid fa-gear"></i></button>
                <button id="logoutButton" class="btn btn-danger mt-auto"><i class="fa-solid fa-right-from-bracket"></i></button>
            </div>
          </div>
        </div>
          
      </div>
    </div>

    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 id="playerUsername" class="modal-title" id="infoModalLabel"></h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body d-flex flex-column">
            <h4 class="player-info-item">
              <i class="fas fa-trophy player-icon" aria-hidden="true"></i> 
              <span id="playerTrophies"></span>
            </h4>
            <h4 class="player-info-item">
              <i class="fas fa-chess-king player-icon" aria-hidden="true"></i> 
              <span id="playerRanking"></span>
            </h4>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="settingsModalLabel">Settings</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="form-group">
                <label for="pieceTheme"><h5>Piece Theme</h5></label>
                <br>
                <div class="d-flex align-items-center">
                    <img width="80px" id="piecePreview" src="img/chesspieces/icpieces/wP.svg" alt="No preview available" class="mt-3" style="margin-top: 0px !important; margin-right: 15px;">
                    <select class="form-select me-3" id="pieceTheme" style="width: auto;">
                      <script>
                        fetch('https://web010.wifiooe.at/julian/JChess/www/php/getThemes.php')
                        .then(response => response.json())
                        .then(data => {
                          const select = document.getElementById('pieceTheme');
                          select.innerHTML = data.map(theme => `<option value="${theme}/">${theme}</option>`).join('');
                        });
                      </script>
                    </select>
                </div>
              <hr>
              <h5>Square Colors</h5>
              <div id="colorSelects" class="d-flex justify-content-between mb-3">
                <div class="me-2">
                  <label for="lightSquareColor">white</label>
                  <input type="color" id="lightSquareColor" name="lightSquareColor" gvalue="#f0d9b5" class="form-control form-control-color">
                </div>
                <div>
                  <label for="darkSquareColor">black</label>
                  <input type="color" id="darkSquareColor" name="darkSquareColor" value="#b58863" class="form-control form-control-color">
                </div>
              </div>
              <button id="resetColors" class="btn btn-secondary">Reset colors</button>
          </div>
          <hr>
          <button class="btn btn-primary" id="mode-switcher"><i class="fa-solid fa-moon"></i></button>Site Theme

          <div class="modal-footer">
            <button type="button" id="saveSettings" class="btn btn-primary">Save</button>
          </div>
        </div>
      </div>
    </div>
    </div>

    <div id="loginpopup">
      <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="loginModalLabel">Login</h5>
            </div>
            <div class="modal-body">
              <div class="row" id="loginFormRow" style="display: block">
                <form id="loginForm">
                  <div class="form-group">
                    <label for="loginUsername">Username:</label>
                    <input type="text" class="form-control" id="loginUsername" name="loginUsername" required />
                  </div>
                  <br />
                  <div class="form-group">
                    <label for="loginPassword">Password:</label>
                    <input type="password" class="form-control" id="loginPassword" name="loginPassword" required />
                  </div>
                  <br />
                  <div class="form-group form-check">
                    <input type="checkbox" class="form-check-input" id="stayLoggedIn" />
                    <label class="form-check-label" for="stayLoggedIn">Angemeldet bleiben</label>
                  </div>
                  <br />
                  <button type="button" class="btn btn-primary" onclick="login()">
                    <span id="loginSpinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none"></span>
                    Login
                  </button>
                  <a href="#" id="registerlink" class="btn btn-link">I want to register a new account.</a>
                </form>
              </div>

              <div class="row" id="registerFormRow" style="display: none">
                <form id="registerForm">
                  <div class="form-group">
                    <label for="registerUsername">Username:</label>
                    <input type="text" class="form-control" id="registerUsername" name="registerUsername" required />
                  </div>
                  <br />
                  <div class="form-group">
                    <label for="registerPassword">Password:</label>
                    <input type="password" class="form-control" id="registerPassword" name="registerPassword" required />
                  </div>
                  <br />
                  <br>
                  <p style="color:gray">Your profile is going to look like this:</p>
                  <div id="pfpPrevDiv">
                  <span id="profilePicture"></span>
                  <span style="font-size: larger !important;" id="usernamePrev"></span>
                </div>
                  <br>
                  <button id="registerButton" type="button" style="margin-right: 15px" class="btn btn-primary" onclick="register()">
                    <span id="registerSpinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none"></span>
                    Register
                  </button>
                  <a href="#" id="loginlink">I want to log in.</a>
                </form>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div id="errorBox" class="error-box" style="display: none"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="cookieModal" tabindex="-1" role="dialog" aria-labelledby="cookieModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="cookieModalLabel">Cookies</h5>
          </div>
          <div class="modal-body">
            We are using cookies to provide statistics that help us give you the best experience of our site. You can find out more or switch them off if you prefer. However, by continuing to use the site without changing settings, you are agreeing to our use of cookies.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick="acceptCookies()">Accept</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="imprintModal" tabindex="-1" aria-labelledby="imprintModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="imprintModalLabel">Impressum</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
          </div>
          <div class="modal-body">
            <strong>Company Name:</strong> coding_academy<br>
            <strong>Address:</strong> WIFI Linz<br>
            <strong>Phone Number:</strong> +43 677 62452660<br>
            <strong>Email:</strong> <a href="mailto:juliangabriel570@gmail.com">juliangabriel570@gmail.com</a><br>
            <strong>Website:</strong> <a href="http://wavebeef.com">wavebeef.com</a><br>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Schließen</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="contactModalLabel">Kontakt</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
          </div>
          <div class="modal-body">
            <h2>Contact</h2>
              <p>You can reach use under this email: <a href="mailto:juliangabriel570@gmail.com">juliangabriel570@gmail.com</a></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script src="js/custom.js" id="mainScript"></script>
  </body>
</html>
